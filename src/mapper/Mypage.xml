<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="mapper.MypageMapper_cyg">
	<cache />			
	<select id="listBuy" parameterType="Search" resultType="Buy">
		select * from buy
		<if test="area != null">
			<where>
				<foreach collection="area" item="item" separator="OR" 
						open="(" close=")">					
					${item} like #{searchKey}
				</foreach>
			</where>
		</if>
		order by buyno desc
	</select>
	
	<select id="countPage" parameterType="Search" resultType="int">
		select count(*) from buy
		<if test= "area != null">
			<where>				
				<foreach collection="area" item="item" separator="OR"
						open="(" close=")" >
							${item} LIKE #{searchKey}
				</foreach>
			</where>
		</if>
	</select>
	
	<select id="listDeal" parameterType="Search" resultType="DealSell">
		select * from deal d , sell s where d.sellid = s.id
      <if test="area != null">
         <where>
            <foreach collection="area" item="item" separator="OR" 
                  open="(" close=")">               
               ${item} like #{searchKey}
            </foreach>
         </where>
      </if>
      order by dealno desc
	</select>
	
	<select id="countDeal" parameterType="Search" resultType="int">
		select count(*) from deal
		<if test= "area != null">
			<where>				
				<foreach collection="area" item="item" separator="OR"
						open="(" close=")" >
							${item} LIKE #{searchKey}
				</foreach>
			</where>
		</if>
	</select>		
</mapper>